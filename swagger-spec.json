{"openapi":"3.0.0","paths":{"/users":{"post":{"operationId":"UsersController_create","parameters":[],"requestBody":{"required":true,"description":"Dados necessários para o cadastro de um novo usuário.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"201":{"description":"Usuário criado com sucesso."},"400":{"description":"Dados de entrada inválidos."},"403":{"description":"Acesso negado. Apenas administradores."}},"security":[{"access-token":[]}],"summary":"Criar um novo usuário (Admin apenas)","tags":["Usuários"]},"get":{"operationId":"UsersController_findAll","parameters":[{"name":"page","required":false,"in":"query","description":"Número da página (inicia em 1)","schema":{"example":1,"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Quantidade de itens por página","schema":{"example":10,"type":"number"}},{"name":"name","required":false,"in":"query","description":"Filtrar usuários por nome (busca parcial, case-insensitive)","schema":{"example":"João","type":"string"}},{"name":"email","required":false,"in":"query","description":"Filtrar usuários por e-mail (busca parcial, case-insensitive)","schema":{"example":"joao@email.com","type":"string"}},{"name":"role","required":false,"in":"query","description":"Filtrar usuários por função (role)","schema":{"example":"admin","type":"string","enum":["admin","teacher","student","guardian"]}},{"required":false,"description":"Número da página (inicia em 1)","name":"page","in":"query","schema":{"example":1,"type":"number"}},{"required":false,"description":"Quantidade de itens por página","name":"limit","in":"query","schema":{"example":10,"type":"number"}},{"required":false,"description":"Filtrar usuários por nome (busca parcial, case-insensitive)","name":"name","in":"query","schema":{"example":"João","type":"string"}},{"required":false,"description":"Filtrar usuários por e-mail (busca parcial, case-insensitive)","name":"email","in":"query","schema":{"example":"joao@email.com","type":"string"}},{"required":false,"description":"Filtrar usuários por função (role)","name":"role","in":"query","schema":{"example":"admin","type":"string"}}],"responses":{"200":{"description":"Lista de usuários retornada com sucesso."},"403":{"description":"Acesso negado. Apenas administradores."}},"security":[{"access-token":[]}],"summary":"Listar todos os usuários com filtros e paginação","tags":["Usuários"]}},"/users/me":{"get":{"operationId":"UsersController_getProfile","parameters":[],"responses":{"200":{"description":"Dados do usuário retornados com sucesso."},"401":{"description":"Token JWT inválido ou ausente."}},"security":[{"access-token":[]}],"summary":"Obter informações do usuário logado","tags":["Usuários"]}},"/users/me/password":{"patch":{"operationId":"UsersController_changePassword","parameters":[],"requestBody":{"required":true,"description":"Dados para alteração de senha.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordDto"}}}},"responses":{"200":{"description":"Senha alterada com sucesso","content":{"application/json":{"schema":{"example":{"message":"Senha alterada com sucesso"}}}}},"400":{"description":"As senhas não coincidem."},"401":{"description":"Senha atual incorreta."}},"security":[{"access-token":[]}],"summary":"Alterar a senha do usuário logado","tags":["Usuários"]}},"/users/{id}":{"get":{"operationId":"UsersController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Usuário encontrado com sucesso."},"403":{"description":"Acesso negado. Apenas administradores."},"404":{"description":"Usuário não encontrado."}},"security":[{"access-token":[]}],"summary":"Buscar um usuário pelo ID (Admin apenas)","tags":["Usuários"]},"patch":{"operationId":"UsersController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"Dados para atualização do usuário.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserDto"}}}},"responses":{"200":{"description":"Usuário atualizado com sucesso."},"403":{"description":"Acesso negado. Apenas administradores."},"404":{"description":"Usuário não encontrado."}},"security":[{"access-token":[]}],"summary":"Atualizar um usuário existente (Admin apenas)","tags":["Usuários"]},"delete":{"operationId":"UsersController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Usuário removido com sucesso."},"403":{"description":"Acesso negado. Apenas administradores."},"404":{"description":"Usuário não encontrado."}},"security":[{"access-token":[]}],"summary":"Remover um usuário pelo ID (Admin apenas)","tags":["Usuários"]}},"/subjects":{"post":{"operationId":"SubjectsController_create","parameters":[],"requestBody":{"required":true,"description":"Dados para a criação da disciplina.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSubjectDto"}}}},"responses":{"201":{"description":"Disciplina criada com sucesso."},"403":{"description":"Acesso negado. Apenas administradores."}},"security":[{"bearer":[]}],"summary":"Criar uma nova disciplina","tags":["Disciplinas"]},"get":{"operationId":"SubjectsController_findAll","parameters":[{"name":"name","required":false,"in":"query","description":"Filtrar por nome da disciplina (busca parcial, case-insensitive).","schema":{"type":"string"}},{"required":false,"description":"Filtrar por nome da disciplina (busca parcial, case-insensitive).","name":"name","in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Lista de disciplinas retornada com sucesso."}},"security":[{"bearer":[]}],"summary":"Listar todas as disciplinas com filtros e paginação","tags":["Disciplinas"]}},"/subjects/{id}":{"get":{"operationId":"SubjectsController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Disciplina encontrada com sucesso."},"404":{"description":"Disciplina não encontrada."}},"security":[{"bearer":[]}],"summary":"Buscar uma disciplina pelo ID","tags":["Disciplinas"]},"patch":{"operationId":"SubjectsController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"Dados a serem atualizados (opcional).","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSubjectDto"}}}},"responses":{"200":{"description":"Disciplina atualizada com sucesso."},"403":{"description":"Acesso negado. Apenas administradores."},"404":{"description":"Disciplina não encontrada."}},"security":[{"bearer":[]}],"summary":"Atualizar dados de uma disciplina existente","tags":["Disciplinas"]},"delete":{"operationId":"SubjectsController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Disciplina removida com sucesso."},"403":{"description":"Acesso negado. Apenas administradores."},"404":{"description":"Disciplina não encontrada."}},"security":[{"bearer":[]}],"summary":"Remover uma disciplina pelo ID","tags":["Disciplinas"]}},"/classes":{"post":{"operationId":"ClassesController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateClassDto"}}}},"responses":{"201":{"description":"Turma criada com sucesso."},"403":{"description":"Apenas administradores."}},"security":[{"access-token":[]}],"summary":"Criar uma nova turma e associar um professor","tags":["Classes"]},"get":{"operationId":"ClassesController_findAll","parameters":[{"name":"name","required":false,"in":"query","description":"Filtrar turmas pelo nome (busca parcial)","schema":{"example":"História","type":"string"}},{"name":"teacherId","required":false,"in":"query","description":"Filtrar turmas pelo ID do professor responsável (UUID)","schema":{"type":"string"}},{"name":"academic_year","required":false,"in":"query","description":"Filtrar turmas pelo ano letivo (ex: 2025)","schema":{"example":2024,"type":"number"}},{"required":false,"description":"Filtrar turmas pelo nome (busca parcial)","name":"name","in":"query","schema":{"example":"História","type":"string"}},{"required":false,"description":"Filtrar turmas pelo ID do professor responsável (UUID)","name":"teacherId","in":"query","schema":{"type":"string"}},{"required":false,"description":"Filtrar turmas pelo ano letivo (ex: 2025)","name":"academic_year","in":"query","schema":{"example":2024,"type":"number"}}],"responses":{"200":{"description":"Lista de turmas retornada."}},"security":[{"access-token":[]}],"summary":"Listar todas as turmas (com filtros e paginação)","tags":["Classes"]}},"/classes/{id}":{"get":{"operationId":"ClassesController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Turma encontrada."},"404":{"description":"Turma não encontrada."}},"security":[{"access-token":[]}],"summary":"Buscar uma turma pelo ID","tags":["Classes"]},"patch":{"operationId":"ClassesController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateClassDto"}}}},"responses":{"200":{"description":"Turma atualizada com sucesso."},"404":{"description":"Turma não encontrada."}},"security":[{"access-token":[]}],"summary":"Atualizar dados de uma turma","tags":["Classes"]},"delete":{"operationId":"ClassesController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Turma removida com sucesso."},"404":{"description":"Turma não encontrada."}},"security":[{"access-token":[]}],"summary":"Remover uma turma","tags":["Classes"]}},"/classes/{classId}/subjects":{"post":{"operationId":"ClassesController_addSubjectToClass","parameters":[{"name":"classId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"properties":{"subjectId":{"type":"string","format":"uuid","example":"d1e2f3g4-h5i6-7890-abcd-ef0123456789"}}}}}},"responses":{"201":{"description":"Disciplina associada com sucesso."}},"security":[{"access-token":[]}],"summary":"Associa uma disciplina a uma turma","tags":["Classes"]}},"/classes/{classId}/subjects/{subjectId}":{"delete":{"operationId":"ClassesController_removeSubjectFromClass","parameters":[{"name":"classId","required":true,"in":"path","schema":{"type":"string"}},{"name":"subjectId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Disciplina desassociada com sucesso."}},"security":[{"access-token":[]}],"summary":"Desassocia uma disciplina da turma","tags":["Classes"]}},"/classes/{classId}/students":{"post":{"operationId":"ClassesController_addStudentToClass","parameters":[{"name":"classId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"properties":{"studentId":{"type":"string","format":"uuid","example":"12345678-abcd-ef01-2345-67890abcdef0"}}}}}},"responses":{"201":{"description":"Aluno matriculado com sucesso."}},"security":[{"access-token":[]}],"summary":"Matricular um aluno em uma turma","tags":["Classes"]},"get":{"operationId":"ClassesController_getStudentsFromClass","parameters":[{"name":"classId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Lista de alunos da turma retornada."}},"security":[{"access-token":[]}],"summary":"Lista todos os alunos matriculados em uma turma","tags":["Classes"]}},"/classes/{classId}/students/{studentId}":{"delete":{"operationId":"ClassesController_removeStudentFromClass","parameters":[{"name":"classId","required":true,"in":"path","schema":{"type":"string"}},{"name":"studentId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Aluno desmatriculado com sucesso."}},"security":[{"access-token":[]}],"summary":"Desmatricula um aluno de uma turma","tags":["Classes"]}},"/grades":{"post":{"operationId":"GradesController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateGradeDto"}}}},"responses":{"201":{"description":"Nota lançada com sucesso."},"403":{"description":"Acesso negado. Apenas Professores."}},"security":[{"bearer":[]}],"summary":"Lança uma nova nota para um aluno em uma disciplina.","tags":["Notas (Grades)"]}},"/students/{studentId}/grades":{"get":{"operationId":"GradesController_findAllByStudent","parameters":[{"name":"studentId","required":true,"in":"path","description":"ID do aluno para consulta de notas.","schema":{"type":"string"}}],"responses":{"200":{"description":"Lista de notas retornada."}},"security":[{"bearer":[]}],"summary":"Lista todas as notas de um aluno. (Admin, Professor, Responsável)","tags":["Notas (Grades)"]}},"/my-grades":{"get":{"operationId":"GradesController_findMyGrades","parameters":[],"responses":{"200":{"description":"Lista de notas do aluno retornada."}},"security":[{"bearer":[]}],"summary":"Consulta as notas do próprio usuário logado.","tags":["Notas (Grades)"]}},"/grades/{id}":{"patch":{"operationId":"GradesController_update","parameters":[{"name":"id","required":true,"in":"path","description":"ID da nota a ser atualizada.","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateGradeDto"}}}},"responses":{"200":{"description":"Nota atualizada com sucesso."}},"security":[{"bearer":[]}],"summary":"Atualiza uma nota existente (acesso: Admin e Professor).","tags":["Notas (Grades)"]},"delete":{"operationId":"GradesController_remove","parameters":[{"name":"id","required":true,"in":"path","description":"ID da nota a ser removida.","schema":{"type":"string"}}],"responses":{"200":{"description":"Nota removida com sucesso."}},"security":[{"bearer":[]}],"summary":"Remove uma nota pelo ID (acesso: Admin e Professor).","tags":["Notas (Grades)"]}},"/attendances":{"post":{"operationId":"AttendancesController_create","parameters":[],"requestBody":{"required":true,"description":"Dados da aula e lista de alunos presentes/ausentes.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateAttendanceDto"}}}},"responses":{"201":{"description":"Frequência registrada com sucesso."},"403":{"description":"Acesso negado. Apenas professores."}},"security":[{"bearer":[]}],"summary":"Registrar frequência de uma aula em lote (Batch)","tags":["Frequência (Attendances)"]},"get":{"operationId":"AttendancesController_findAll","parameters":[{"name":"classId","required":false,"in":"query","description":"Filtrar por ID de uma Turma específica.","schema":{"type":"string"}},{"name":"subjectId","required":false,"in":"query","description":"Filtrar por ID de uma Disciplina específica.","schema":{"type":"string"}},{"name":"studentId","required":false,"in":"query","description":"Filtrar por ID de um Aluno específico.","schema":{"type":"string"}},{"name":"dateFrom","required":false,"in":"query","description":"Filtrar registros a partir de uma data (YYYY-MM-DD).","schema":{"type":"string"}},{"required":false,"description":"Filtrar por ID de uma Turma específica.","name":"classId","in":"query","schema":{"type":"string"}},{"required":false,"description":"Filtrar por ID de uma Disciplina específica.","name":"subjectId","in":"query","schema":{"type":"string"}},{"required":false,"description":"Filtrar por ID de um Aluno específico.","name":"studentId","in":"query","schema":{"type":"string"}},{"required":false,"description":"Filtrar registros a partir de uma data (YYYY-MM-DD).","name":"dateFrom","in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Registros de frequência retornados com sucesso."}},"security":[{"bearer":[]}],"summary":"Listar registros de frequência com filtros e paginação","tags":["Frequência (Attendances)"]}},"/attendances/students/{studentId}":{"get":{"operationId":"AttendancesController_findStudentHistory","parameters":[{"name":"studentId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Histórico de frequência do aluno retornado."}},"security":[{"bearer":[]}],"summary":"Consultar o histórico de frequência de um aluno","tags":["Frequência (Attendances)"]}},"/attendances/classes/{classId}/summary":{"get":{"operationId":"AttendancesController_getClassAttendanceSummary","parameters":[{"name":"classId","required":true,"in":"path","description":"ID da turma","schema":{"type":"string"}}],"responses":{"200":{"description":"Resumo de frequência retornado com sucesso"}},"security":[{"bearer":[]}],"summary":"Resumo de frequência de todos os alunos de uma turma","tags":["Frequência (Attendances)"]}},"/attendances/{id}":{"patch":{"operationId":"AttendancesController_update","parameters":[{"name":"id","required":true,"in":"path","description":"ID do registro de frequência","schema":{"type":"number"}}],"requestBody":{"required":true,"description":"Dados para atualização do registro de frequência","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateAttendanceDto"}}}},"responses":{"200":{"description":"Frequência atualizada com sucesso"},"403":{"description":"Sem permissão para editar esta frequência"},"404":{"description":"Registro de frequência não encontrado"}},"security":[{"bearer":[]}],"summary":"Atualizar/Corrigir um registro individual de frequência","tags":["Frequência (Attendances)"]},"delete":{"operationId":"AttendancesController_remove","parameters":[{"name":"id","required":true,"in":"path","description":"ID do registro de frequência","schema":{"type":"number"}}],"responses":{"200":{"description":"Frequência removida com sucesso","content":{"application/json":{"schema":{"example":{"message":"Frequência removida com sucesso"}}}}},"403":{"description":"Sem permissão para remover esta frequência"},"404":{"description":"Registro de frequência não encontrado"}},"security":[{"bearer":[]}],"summary":"Remover um registro individual de frequência","tags":["Frequência (Attendances)"]}},"/auth/register":{"post":{"operationId":"AuthController_register","parameters":[],"requestBody":{"required":true,"description":"Dados para criação do primeiro usuário admin.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"201":{"description":"Usuário admin criado com sucesso. Retorna token de acesso.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponseDto"}}}},"400":{"description":"Registro público apenas para o primeiro usuário do sistema."}},"summary":"Registrar primeiro usuário admin (público)","tags":["Autenticação"]}},"/auth/login":{"post":{"operationId":"AuthController_login","parameters":[],"requestBody":{"required":true,"description":"Credenciais (email e password) do usuário.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequestDto"}}}},"responses":{"200":{"description":"Login bem-sucedido. Retorna o token de acesso.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponseDto"}}}},"401":{"description":"Credenciais inválidas."}},"summary":"Autenticar usuário e obter token JWT","tags":["Autenticação"]}},"/auth/logout":{"post":{"operationId":"AuthController_logout","parameters":[],"responses":{"200":{"description":"Logout realizado com sucesso","content":{"application/json":{"schema":{"example":{"success":true,"message":"Logout realizado com sucesso. Token deve ser descartado pelo cliente."}}}}},"401":{"description":"Token JWT inválido ou ausente."}},"security":[{"access-token":[]}],"summary":"Fazer logout do usuário (invalidar token)","tags":["Autenticação"]}},"/announcements":{"post":{"operationId":"AnnouncementsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateAnnouncementDto"}}}},"responses":{"201":{"description":"O aviso foi criado com sucesso."},"403":{"description":"Acesso negado."}},"security":[{"bearer":[]}],"summary":"Cria um novo aviso","tags":["Avisos"]},"get":{"operationId":"AnnouncementsController_findAll","parameters":[{"name":"title","required":false,"in":"query","description":"Filtrar avisos pelo título (busca parcial, case-insensitive)","schema":{"type":"string"}},{"name":"classId","required":false,"in":"query","description":"Filtrar avisos por um ID de turma específico","schema":{"type":"string"}},{"name":"priority","required":false,"in":"query","description":"Filtrar avisos por prioridade","schema":{"type":"string","enum":["low","medium","high"]}},{"name":"targetAudience","required":false,"in":"query","description":"Filtrar avisos por público-alvo","schema":{"example":"students","type":"string"}}],"responses":{"200":{"description":"Lista de avisos retornada com sucesso."}},"security":[{"bearer":[]}],"summary":"Lista todos os avisos com filtros e paginação","tags":["Avisos"]}},"/announcements/{id}":{"get":{"operationId":"AnnouncementsController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Aviso retornado com sucesso."},"404":{"description":"Aviso não encontrado."}},"security":[{"bearer":[]}],"summary":"Busca um aviso por ID","tags":["Avisos"]},"patch":{"operationId":"AnnouncementsController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateAnnouncementDto"}}}},"responses":{"200":{"description":"Aviso atualizado com sucesso."},"403":{"description":"Acesso negado."},"404":{"description":"Aviso não encontrado."}},"security":[{"bearer":[]}],"summary":"Atualiza um aviso","tags":["Avisos"]},"delete":{"operationId":"AnnouncementsController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Aviso removido com sucesso.","content":{"application/json":{"schema":{"example":{"message":"Aviso removido com sucesso"}}}}},"403":{"description":"Acesso negado."},"404":{"description":"Aviso não encontrado."}},"security":[{"bearer":[]}],"summary":"Remove um aviso","tags":["Avisos"]}},"/invoices":{"post":{"operationId":"InvoicesController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateInvoiceDto"}}}},"responses":{"201":{"description":"Fatura criada com sucesso."}},"security":[{"bearer":[]}],"summary":"Cria uma fatura individual para um aluno.","tags":["Financeiro (Faturas e Relatórios)"]},"get":{"operationId":"InvoicesController_findAll","parameters":[{"name":"studentId","required":false,"in":"query","description":"Filtrar por ID do aluno [cite: 745]","schema":{"type":"string"}},{"name":"status","required":false,"in":"query","description":"Filtrar por status da fatura (pending, paid, overdue, canceled) [cite: 559, 561]","schema":{"type":"string","enum":["pending","paid","overdue","canceled"]}},{"name":"dueDateFrom","required":false,"in":"query","description":"Filtrar por data de vencimento a partir de... (YYYY-MM-DD)","schema":{"type":"string"}},{"name":"dueDateTo","required":false,"in":"query","description":"Filtrar por data de vencimento até... (YYYY-MM-DD)","schema":{"type":"string"}},{"name":"teacherId","required":false,"in":"query","description":"Filtrar por ID do professor (para relatórios)","schema":{"type":"string"}},{"required":false,"description":"Filtrar por ID do aluno [cite: 745]","name":"studentId","in":"query","schema":{"type":"string"}},{"required":false,"description":"Filtrar por status da fatura (pending, paid, overdue, canceled) [cite: 559, 561]","name":"status","in":"query","schema":{"type":"string"}},{"required":false,"description":"Filtrar por data de vencimento a partir de... (YYYY-MM-DD)","name":"dueDateFrom","in":"query","schema":{"type":"string"}},{"required":false,"description":"Filtrar por data de vencimento até... (YYYY-MM-DD)","name":"dueDateTo","in":"query","schema":{"type":"string"}},{"required":false,"description":"Filtrar por ID do professor (para relatórios)","name":"teacherId","in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Lista de faturas retornada."}},"security":[{"bearer":[]}],"summary":"ADMIN: Lista todas as faturas com filtros e paginação.","tags":["Financeiro (Faturas e Relatórios)"]}},"/invoices/{id}":{"patch":{"operationId":"InvoicesController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateInvoiceDto"}}}},"responses":{"200":{"description":"Fatura atualizada com sucesso."}},"security":[{"bearer":[]}],"summary":"Atualiza os dados de uma fatura.","tags":["Financeiro (Faturas e Relatórios)"]},"get":{"operationId":"InvoicesController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Fatura encontrada."}},"security":[{"bearer":[]}],"summary":"Busca uma fatura por ID. Acessível por Admin, Aluno e Responsável (se for a própria fatura).","tags":["Financeiro (Faturas e Relatórios)"]}},"/students/{studentId}/invoices":{"get":{"operationId":"InvoicesController_findAllByStudent","parameters":[{"name":"studentId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Faturas do aluno listadas."}},"security":[{"bearer":[]}],"summary":"Lista todas as faturas de um aluno. Acessível por Admin/Professor.","tags":["Financeiro (Faturas e Relatórios)"]}},"/invoices/batch":{"post":{"operationId":"InvoicesController_createBatch","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateBatchInvoiceDto"}}}},"responses":{"201":{"description":"Faturas geradas em lote com sucesso."}},"security":[{"bearer":[]}],"summary":"Cria faturas em lote para todos os alunos de uma turma.","tags":["Financeiro (Faturas e Relatórios)"]}},"/invoices/{id}/pay":{"post":{"operationId":"InvoicesController_markAsPaid","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Fatura marcada como paga."}},"security":[{"bearer":[]}],"summary":"Marca uma fatura como PAGA e define a data de pagamento.","tags":["Financeiro (Faturas e Relatórios)"]}},"/invoices/{id}/cancel":{"post":{"operationId":"InvoicesController_cancel","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Fatura cancelada."}},"security":[{"bearer":[]}],"summary":"Marca uma fatura como CANCELADA.","tags":["Financeiro (Faturas e Relatórios)"]}},"/reports/financial/revenue":{"get":{"operationId":"ReportsController_getFinancialReport","parameters":[{"name":"startDate","required":true,"in":"query","description":"Data de início (YYYY-MM-DD)","schema":{"example":"2025-01-01","type":"string"}},{"name":"endDate","required":true,"in":"query","description":"Data de fim (YYYY-MM-DD)","schema":{"example":"2025-12-31","type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Relatório de Receita por Período","tags":["Relatórios Acadêmicos e Financeiros"]}},"/reports/financial/defaults":{"get":{"operationId":"ReportsController_getFinancialDefaults","parameters":[],"responses":{"200":{"description":"Lista de inadimplentes."}},"security":[{"bearer":[]}],"summary":"Relatório de Inadimplência (Faturas vencidas)","tags":["Relatórios Acadêmicos e Financeiros"]}},"/dashboard/admin":{"get":{"operationId":"DashboardsController_getAdminDashboard","parameters":[],"responses":{"200":{"description":"Dashboard administrativo retornado com sucesso","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminDashboardResponse"}}}}},"security":[{"bearer":[]}],"summary":"Obter dashboard administrativo","tags":["Dashboards"]}},"/dashboard/teacher":{"get":{"operationId":"DashboardsController_getTeacherDashboard","parameters":[],"responses":{"200":{"description":"Dashboard do professor retornado com sucesso","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TeacherDashboardResponse"}}}}},"security":[{"bearer":[]}],"summary":"Obter dashboard do professor","tags":["Dashboards"]}},"/dashboard/student":{"get":{"operationId":"DashboardsController_getStudentDashboard","parameters":[],"responses":{"200":{"description":"Dashboard do aluno/responsável retornado com sucesso","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentDashboardResponse"}}}}},"security":[{"bearer":[]}],"summary":"Obter dashboard do aluno/responsável","tags":["Dashboards"]}},"/reports/students/{studentId}/history":{"get":{"operationId":"ReportsController_getStudentHistory","parameters":[{"name":"studentId","required":true,"in":"path","description":"ID do aluno","schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"description":"Histórico gerado com sucesso"}},"security":[{"bearer":[]}],"summary":"Gerar histórico completo do aluno (Boletim)","tags":["Relatórios Acadêmicos e Financeiros"]}},"/reports/classes/{classId}/performance":{"get":{"operationId":"ReportsController_getClassPerformance","parameters":[{"name":"classId","required":true,"in":"path","description":"ID da turma","schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"description":"Relatório de desempenho gerado com sucesso"}},"security":[{"bearer":[]}],"summary":"Gerar relatório de desempenho da turma","tags":["Relatórios Acadêmicos e Financeiros"]}},"/events":{"post":{"operationId":"EventsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateEventDto"}}}},"responses":{"201":{"description":"Evento criado com sucesso."},"403":{"description":"Acesso negado. Apenas administradores."}},"security":[{"bearer":[]}],"summary":"Criar um novo evento no calendário escolar","tags":["Eventos do Calendário"]},"get":{"operationId":"EventsController_findAll","parameters":[{"name":"title","required":false,"in":"query","description":"Filtrar por título do evento (busca parcial)","schema":{"type":"string"}},{"name":"type","required":false,"in":"query","description":"Filtrar por tipo de evento","schema":{"type":"string","enum":["holiday","exam","meeting","reunion","other"]}},{"name":"dateFrom","required":false,"in":"query","description":"Data de início do período (YYYY-MM-DD)","schema":{"type":"string"}},{"name":"dateTo","required":false,"in":"query","description":"Data de fim do período (YYYY-MM-DD)","schema":{"type":"string"}},{"description":"Filtrar por título do evento (busca parcial)","required":false,"name":"title","in":"query","schema":{"type":"string"}},{"description":"Filtrar por tipo de evento","required":false,"name":"type","in":"query","schema":{"type":"string"}},{"description":"Data de início do período (YYYY-MM-DD)","required":false,"name":"dateFrom","in":"query","schema":{"type":"string"}},{"description":"Data de fim do período (YYYY-MM-DD)","required":false,"name":"dateTo","in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Lista de eventos retornada com sucesso."}},"security":[{"bearer":[]}],"summary":"Listar todos os eventos com filtros de período e tipo","tags":["Eventos do Calendário"]}},"/events/{id}":{"get":{"operationId":"EventsController_findOne","parameters":[{"name":"id","required":true,"in":"path","description":"ID do Evento","schema":{"type":"string"}}],"responses":{"200":{"description":"Evento encontrado."},"404":{"description":"Evento não encontrado."}},"security":[{"bearer":[]}],"summary":"Buscar um evento pelo ID","tags":["Eventos do Calendário"]},"patch":{"operationId":"EventsController_update","parameters":[{"name":"id","required":true,"in":"path","description":"ID do Evento","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateEventDto"}}}},"responses":{"200":{"description":"Evento atualizado com sucesso."},"404":{"description":"Evento não encontrado."}},"security":[{"bearer":[]}],"summary":"Atualizar um evento existente","tags":["Eventos do Calendário"]},"delete":{"operationId":"EventsController_remove","parameters":[{"name":"id","required":true,"in":"path","description":"ID do Evento","schema":{"type":"string"}}],"responses":{"200":{"description":"Evento removido com sucesso.","content":{"application/json":{"schema":{"example":{"message":"Evento 'Feriado de Natal' removido com sucesso."}}}}},"404":{"description":"Evento não encontrado."}},"security":[{"bearer":[]}],"summary":"Remover um evento pelo ID","tags":["Eventos do Calendário"]}}},"info":{"title":"Plataforma de Gestão Escolar/Universitária API","description":"Documentação completa para a API RESTful da plataforma de gestão, cobrindo módulos Acadêmicos, Financeiros e de Comunicação.","version":"1.0","contact":{}},"tags":[{"name":"Autenticação","description":"Endpoints para login e gestão de tokens JWT"},{"name":"Usuários","description":"CRUD e gestão de perfis (Admin, Professor, Aluno, Responsável)"},{"name":"Classes","description":"Gestão de turmas, matrículas e associações"},{"name":"Disciplinas","description":"Gestão de matérias e currículo"},{"name":"Notas (Grades)","description":"Lançamento e consulta de notas"},{"name":"Frequência (Attendances)","description":"Registro e consulta de presenças/faltas"},{"name":"Avisos","description":"Comunicação oficial da escola/universidade"},{"name":"Financeiro (Faturas e Relatórios)","description":"Gestão de mensalidades e pagamentos"},{"name":"Relatórios Acadêmicos e Financeiros","description":"Agregação de dados para histórico e desempenho"},{"name":"Dashboards","description":"Resumo de dados por perfil"},{"name":"Eventos do Calendário","description":"Gestão de feriados e eventos escolares"}],"servers":[],"components":{"securitySchemes":{"access-token":{"scheme":"bearer","bearerFormat":"JWT","type":"http","in":"header"}},"schemas":{"CreateUserDto":{"type":"object","properties":{"name":{"type":"string","description":"Nome completo do usuário","example":"João da Silva","minLength":1},"email":{"type":"string","description":"Endereço de e-mail único do usuário","example":"joao.silva@escola.com"},"password":{"type":"string","description":"Senha (será hasheada antes de ser salva)","example":"SenhaSegura123","minLength":6},"role":{"type":"string","description":"Papel/permissão do usuário no sistema (opcional para registro público)","enum":["admin","teacher","student","guardian"],"example":"student"}},"required":["name","email","password"]},"ChangePasswordDto":{"type":"object","properties":{"currentPassword":{"type":"string","description":"Senha atual do usuário"},"newPassword":{"type":"string","description":"Nova senha (mínimo 6 caracteres)","minLength":6},"confirmNewPassword":{"type":"string","description":"Confirmação da nova senha"}},"required":["currentPassword","newPassword","confirmNewPassword"]},"UpdateUserDto":{"type":"object","properties":{"name":{"type":"string","description":"Nome completo do usuário","example":"João da Silva","minLength":1},"email":{"type":"string","description":"Endereço de e-mail único do usuário","example":"joao.silva@escola.com"},"password":{"type":"string","description":"Nova senha do usuário (opcional). Se enviada, será hasheada.","example":"novaSenha123","minLength":6},"role":{"type":"string","description":"Papel/permissão do usuário no sistema (opcional para registro público)","enum":["admin","teacher","student","guardian"],"example":"student"}}},"CreateSubjectDto":{"type":"object","properties":{"name":{"type":"string","description":"Nome da disciplina (deve ser único).","example":"Matemática Aplicada"},"description":{"type":"string","description":"Descrição detalhada da ementa ou conteúdo da disciplina.","example":"Estudo de cálculo diferencial e integral."}},"required":["name"]},"UpdateSubjectDto":{"type":"object","properties":{}},"CreateClassDto":{"type":"object","properties":{"name":{"type":"string","description":"Nome da turma (ex: \"3º Ano A - Tarde\")","example":"Matemática 201"},"academic_year":{"type":"number","description":"Ano letivo ao qual a turma pertence (ex: 2025)","example":2025},"teacherId":{"type":"string","description":"ID do professor responsável pela turma (UUID)","example":"a1b2c3d4-e5f6-7890-1234-567890abcdef"}},"required":["name","academic_year","teacherId"]},"UpdateClassDto":{"type":"object","properties":{}},"CreateGradeDto":{"type":"object","properties":{"value":{"type":"number","description":"Valor da nota (entre 0 e 10)","minimum":0,"maximum":10,"example":8.5},"description":{"type":"string","description":"Descrição da avaliação (Ex: Prova Bimestral, Trabalho em Grupo)","example":"Exame Final 1º Semestre"},"studentId":{"type":"string","description":"ID do aluno que recebeu a nota","example":"a1b2c3d4-e5f6-7a8b-9c0d-1e2f3a4b5c6d"},"subjectId":{"type":"string","description":"ID da disciplina relacionada à nota","example":"d4c3b2a1-f6e5-8b7a-0d9c-f3e2d1c0b9a8"}},"required":["value","description","studentId","subjectId"]},"UpdateGradeDto":{"type":"object","properties":{}},"StudentAttendanceDto":{"type":"object","properties":{"studentId":{"type":"string","description":"ID do aluno."},"status":{"type":"string","description":"Status da frequência.","enum":["present","absent"],"example":"present"}},"required":["studentId","status"]},"CreateAttendanceDto":{"type":"object","properties":{"date":{"type":"string","description":"Data da aula no formato YYYY-MM-DD.","example":"2025-10-16"},"classId":{"type":"string","description":"ID da Turma (Class) à qual o registro pertence."},"subjectId":{"type":"string","description":"ID da Disciplina (Subject) da aula."},"presences":{"description":"Lista de presença/falta dos alunos.","type":"array","items":{"$ref":"#/components/schemas/StudentAttendanceDto"}}},"required":["date","classId","subjectId","presences"]},"UpdateAttendanceDto":{"type":"object","properties":{"status":{"type":"string","description":"Status da frequência","enum":["present","absent"],"example":"present"},"date":{"type":"string","description":"Data da frequência (YYYY-MM-DD)","example":"2024-01-15"}}},"AuthResponseDto":{"type":"object","properties":{"access_token":{"type":"string","description":"Token de acesso JWT. Deve ser usado no header \"Authorization: Bearer <token>\" para acessar rotas protegidas.","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImFkbWluQGVzY29sYS5jb20iLCJzdWIiOiI2OTM1YzcyMi1jYjQ0LTQyOTAtYjAxYi0wY2E0NzkxMWU0NjUiLCJyb2xlIjoiYWRtaW4iLCJpYXQiOjE2MTgyMzQ1NTEsImV4cCI6MTYxODMyMDk1MX0.fQzF5Lw5HqR1D8fK8zW4oWbF9x9L5Y7K9Y9g4f4"}},"required":["access_token"]},"LoginRequestDto":{"type":"object","properties":{"email":{"type":"string","description":"O e-mail do usuário para autenticação.","example":"professor@escola.com"},"password":{"type":"string","description":"A senha do usuário.","example":"minhasenha123"}},"required":["email","password"]},"CreateAnnouncementDto":{"type":"object","properties":{"title":{"type":"string","description":"Título do aviso","example":"Reunião de Pais"},"content":{"type":"string","description":"Conteúdo do aviso","example":"Há uma reunião de pais marcada para próxima sexta-feira..."},"classId":{"type":"string","description":"ID da turma (opcional). Se não for fornecido, o aviso é geral."}},"required":["title","content"]},"UpdateAnnouncementDto":{"type":"object","properties":{"title":{"type":"string","description":"Título do aviso","example":"Reunião de Pais"},"content":{"type":"string","description":"Conteúdo do aviso","example":"Há uma reunião de pais marcada para próxima sexta-feira..."},"classId":{"type":"string","description":"ID da turma (opcional). Se não for fornecido, o aviso é geral."}}},"CreateInvoiceDto":{"type":"object","properties":{"studentId":{"type":"string","description":"ID do aluno (usuário com papel de estudante) para quem a fatura será gerada.","example":"a1b2c3d4-e5f6-7890-1234-567890abcdef"},"description":{"type":"string","description":"Descrição da fatura, que aparecerá para o usuário.","example":"Mensalidade de Novembro/2025"},"amount":{"type":"number","description":"Valor monetário da fatura.","example":750.5},"dueDate":{"format":"date-time","type":"string","description":"Data de vencimento no formato YYYY-MM-DD.","example":"2025-11-10"}},"required":["studentId","description","amount","dueDate"]},"UpdateInvoiceDto":{"type":"object","properties":{"description":{"type":"string","description":"Descrição da fatura, que aparecerá para o usuário.","example":"Mensalidade de Novembro/2025"},"amount":{"type":"number","description":"Valor monetário da fatura.","example":750.5},"dueDate":{"format":"date-time","type":"string","description":"Data de vencimento no formato YYYY-MM-DD.","example":"2025-11-10"}}},"CreateBatchInvoiceDto":{"type":"object","properties":{"classId":{"type":"string","description":"ID da turma para a qual as faturas serão geradas em lote.","example":"f1e2d3c4-b5a6-9870-6543-210987fedcba"},"description":{"type":"string","description":"Descrição base para as faturas. Será aplicada a todos os alunos da turma.","example":"Mensalidade de Novembro/2025"},"amount":{"type":"number","description":"Valor a ser cobrado de cada aluno.","example":800},"dueDate":{"format":"date-time","type":"string","description":"Data de vencimento para todas as faturas geradas.","example":"2025-11-10"}},"required":["classId","description","amount","dueDate"]},"AdminDashboardResponse":{"type":"object","properties":{"totalStudents":{"type":"number","description":"Total de alunos no sistema.","example":1250},"totalTeachers":{"type":"number","description":"Total de professores.","example":50},"totalClasses":{"type":"number","description":"Total de turmas ativas.","example":45},"activeInvoices":{"type":"number","description":"Total de faturas PENDENTES.","example":87},"paidInvoicesThisMonth":{"type":"number","description":"Número de faturas pagas neste mês.","example":250},"revenueThisMonth":{"type":"number","description":"Receita total neste mês.","example":550000.5}},"required":["totalStudents","totalTeachers","totalClasses","activeInvoices","paidInvoicesThisMonth","revenueThisMonth"]},"TeacherDashboardResponse":{"type":"object","properties":{"myClasses":{"type":"number","description":"Número de turmas lecionadas.","example":3},"pendingGrading":{"type":"number","description":"Número de trabalhos ou provas pendentes de correção.","example":15},"nextClasses":{"type":"array","description":"Lista das próximas turmas (com ID, nome e ano letivo).","items":{"type":"object"}},"recentAnnouncements":{"type":"array","description":"Avisos recentes publicados pelo professor.","items":{"type":"object"}}},"required":["myClasses","pendingGrading","nextClasses","recentAnnouncements"]},"StudentDashboardResponse":{"type":"object","properties":{"enrolledClasses":{"type":"number","description":"Número de turmas nas quais o aluno está matriculado.","example":4},"averageGrade":{"type":"number","description":"Média de notas geral do aluno.","example":8.5},"attendanceRate":{"type":"number","description":"Taxa de frequência (em percentual).","example":95.5},"upcomingAssignments":{"type":"array","description":"Próximos trabalhos/provas pendentes.","items":{"type":"object"}},"recentGrades":{"type":"array","description":"Notas recentes (Array de objetos de nota).","items":{"type":"object"}}},"required":["enrolledClasses","averageGrade","attendanceRate","upcomingAssignments","recentGrades"]},"CreateEventDto":{"type":"object","properties":{"title":{"type":"string","description":"Título breve do evento","example":"Feriado de Natal"},"description":{"type":"string","description":"Descrição detalhada do evento"},"date":{"type":"string","description":"Data do evento (formato YYYY-MM-DD)","example":"2025-12-25"},"type":{"type":"string","description":"Tipo do evento","enum":["holiday","exam","meeting","reunion","other"],"example":"holiday"}},"required":["title","date","type"]},"UpdateEventDto":{"type":"object","properties":{"title":{"type":"string","description":"Título breve do evento","example":"Feriado de Natal"},"description":{"type":"string","description":"Descrição detalhada do evento"},"date":{"type":"string","description":"Data do evento (formato YYYY-MM-DD)","example":"2025-12-25"},"type":{"type":"string","description":"Tipo do evento","enum":["holiday","exam","meeting","reunion","other"],"example":"holiday"}}}}}}